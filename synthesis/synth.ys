# Load the cell library
read_liberty -lib lib/gscl45nm.lib

# Read all SystemVerilog source files in RTL/

read_verilog -sv ../RTL/*.sv
read_verilog -sv ../RTL/alu_blocks/*.sv

# Synthesis flow
hierarchy -check -top core
synth -top core

# Technology-independent optimization
opt -fast -full

# Flatten hierarchy to allow global optimization
flatten

# Map D flip-flops
dfflibmap -liberty lib/gscl45nm.lib

# Technology map combinational logic using ABC
abc -liberty lib/gscl45nm.lib

# Clean and write out the synthesized netlist
clean
write_verilog -noattr output/core_synth.v

# Print synthesis statistics and cell counts
stat -liberty lib/gscl45nm.lib